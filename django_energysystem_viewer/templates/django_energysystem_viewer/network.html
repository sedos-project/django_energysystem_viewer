{% extends "django_energysystem_viewer/base.html" %}
{% load static compress %}

{% block content %}
  {{ block.super }}
  <div class="container dashboard">
    <h1 class="d-flex align-items-center">
      <svg width="32" height="32" viewBox="0 0 134 134" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="67" cy="67" r="66" fill="#E5E5E5"/>
        <path d="M50.567 38.3886C51.544 37.8204 52.7965 38.1536 53.3652 39.1393C53.9304 40.1216 53.599 41.3808 52.6185 41.9526L44.0809 46.9092C44.2728 47.6107 44.3775 48.3509 44.3775 49.1156C44.3775 49.8768 44.2728 50.6205 44.0809 51.322L57.5377 59.1305C57.7854 58.8323 58.0436 58.5447 58.3157 58.271C60.0777 56.4995 62.377 55.2613 64.9449 54.8264V39.1992L64.8821 39.1817C62.8619 38.6379 61.0476 37.3155 59.9102 35.3406C58.7798 33.3727 58.5496 31.1312 59.0903 29.1036C59.6311 27.0726 60.9464 25.2485 62.9107 24.105C64.8681 22.9684 67.0976 22.7369 69.1142 23.2806C71.1343 23.8243 72.9486 25.1468 74.086 27.1217C75.2164 29.0896 75.4467 31.3311 74.906 33.3621L74.8885 33.4358L91.9671 43.3489L92.0195 43.2963C93.5023 41.8054 95.5469 40.8829 97.8113 40.8829C100.072 40.8829 102.12 41.8054 103.603 43.2963C105.086 44.7872 106 46.8427 106 49.1194C106 51.3924 105.082 53.4515 103.603 54.9424C102.581 55.9667 101.297 56.7244 99.8559 57.0962V76.9117C101.293 77.2835 102.584 78.0412 103.603 79.0655C105.086 80.5564 106 82.6119 106 84.8885C106 87.1616 105.082 89.2207 103.603 90.7116C102.12 92.2025 100.076 93.1215 97.8113 93.1215C95.5504 93.1215 93.5023 92.199 92.0195 90.7081L91.9671 90.6555L74.8885 100.569C75.2863 102.007 75.2828 103.501 74.9094 104.897C74.3686 106.932 73.0533 108.759 71.096 109.892L71.0925 109.889L71.0855 109.892C69.1282 111.029 66.8987 111.264 64.8821 110.72C62.9073 110.191 61.1314 108.917 59.9939 107.027C59.9206 106.918 59.8578 106.806 59.802 106.683C58.7657 104.76 58.5669 102.6 59.0903 100.639C59.6171 98.6533 60.8836 96.8678 62.7642 95.7242C62.8724 95.647 62.984 95.5874 63.1027 95.5312C63.6958 95.205 64.3203 94.963 64.9449 94.7981V79.1709C62.3769 78.736 60.0777 77.5012 58.3157 75.7263C58.0436 75.4526 57.7819 75.165 57.5377 74.8668L44.0809 82.6753C44.2728 83.3769 44.3775 84.1171 44.3775 84.8817C44.3775 85.6429 44.2728 86.3866 44.0809 87.0881L52.6185 92.0447C53.5955 92.613 53.9304 93.8723 53.3652 94.858C52.8 95.8402 51.5474 96.177 50.567 95.6087L42.0329 90.6556L41.9805 90.7082C40.4977 92.1991 38.4531 93.1216 36.1887 93.1216C33.9279 93.1216 31.8798 92.1991 30.397 90.7117C28.9141 89.2208 28 87.1653 28 84.8887C28 82.6156 28.9176 80.5565 30.397 79.0656C31.4157 78.0413 32.6997 77.2871 34.1372 76.9153V57.0962C32.6997 56.7244 31.4157 55.9667 30.397 54.9459C28.9141 53.4551 28 51.3995 28 49.1229C28 46.8499 28.9176 44.7907 30.397 43.2998C31.8798 41.809 33.9243 40.8864 36.1887 40.8864C38.4496 40.8864 40.4977 41.809 41.9805 43.2998L42.0329 43.3525L50.567 38.3994L50.567 38.3886ZM38.2366 57.0852V76.9043C39.6741 77.2761 40.958 78.0338 41.9733 79.0546L42.0256 79.1072L55.4824 71.2987C54.987 69.9587 54.7148 68.5065 54.7148 66.9946C54.7148 65.4792 54.987 64.0304 55.4824 62.6904L42.0256 54.8819L41.9733 54.9346C40.9545 55.9588 39.6706 56.7131 38.2331 57.0848L38.2366 57.0852ZM89.9119 46.9054L72.8368 36.9922C72.3309 37.5079 71.7448 37.9709 71.0889 38.3498L71.0854 38.3463L71.0784 38.3498C70.426 38.7286 69.7386 39.0057 69.0444 39.1916V54.8224C71.6123 55.2574 73.9115 56.4922 75.6735 58.2671C75.9457 58.5407 76.2073 58.8283 76.4516 59.1265L89.9083 51.318C89.7164 50.6165 89.6117 49.8763 89.6117 49.1116C89.6117 48.3469 89.7164 47.6067 89.9083 46.9052L89.9119 46.9054ZM95.763 76.9043V57.0888C94.322 56.717 93.0346 55.9593 92.0158 54.935L91.9635 54.8824L78.5067 62.6909C79.0022 64.0309 79.2743 65.4831 79.2743 66.995C79.2743 68.5104 79.0022 69.9592 78.5067 71.2992L91.9635 79.1077L92.0158 79.055C93.0346 78.0273 94.322 77.273 95.763 76.9013V76.9043ZM72.8402 96.9973L89.9153 87.0841C89.7234 86.3826 89.6187 85.6424 89.6187 84.8777C89.6187 84.1165 89.7234 83.3728 89.9153 82.6713L76.4585 74.8628C76.2108 75.161 75.9526 75.4487 75.6805 75.7223C73.9185 77.4938 71.6193 78.732 69.0514 79.1669V94.7941L69.1142 94.8116C70.5063 95.187 71.8005 95.9309 72.8402 96.9973Z" fill="black"/>
      </svg>
      <span class="ms-3">
        Network data
      </span>
    </h1>
    <div class="row" style="padding-left: 0.75rem">
      <section class="col-md-3 dashboard__controls">
        <!-- Network Graph Forms -->
        <div class="row">
          <form hx-get="/energysystem/network_graph"
                hx-target="#network_graph"
                hx-trigger="change">
            <input type="hidden" name="structure" value="{{ structure_name }}" />
            <div class="control">
              <label for="sectors">Sectors:</label>
              <select id="sectors" name="sectors" multiple>
                <option label="Power" value="pow" selected></option>
                <option label="X2X" value="x2x" selected></option>
                <option label="Industry" value="ind"></option>
                <option label="Transport" value="tra"></option>
                <option label="Heat" value="hea"></option>
                <option label="Helper" value="hel"></option>
              </select>
            </div>
            <div class="control">
              <label for="nomenclature_level">Depth:</label>
              <select id="nomenclature_level" name="nomenclature_level">
                <option label="full" value=20 selected></option>
                <option label="reduced" value=3></option>
                <option label="simple" value=2></option>
              </select>
            </div>
            <div class="control">
              <label for="mapping">Mapping:</label>
              <select id="mapping" name="mapping">
                <option label="kk" value="kk"></option>
                <option label="fr" value="fr" selected></option>
                <option label="go" value="go"></option>
              </select>
            </div>
            <div id="proc_comm"
                 _="on input if #process.value add @disabled to #commodity else remove @disabled from #commodity end on input if #commodity.value add @disabled to #process else remove @disabled from #process">
              <div class="control">
                <label for="process">Display specific process:</label>
                <input list="processes"
                       id="process"
                       name="process"
                       placeholder="Enter or select process...">
                <datalist id="processes">
                {% for process in unique_processes %}<option value="{{ process }}"></option>{% endfor %}
              </datalist>
              </div>
              <div class="control">
                <label for="commodity">Display specific commodity:</label>
                <input list="commodities"
                       id="commodity"
                       name="commodity"
                       placeholder="Enter or select commodity...">
                <datalist id="commodities">
                  {% for commodity in unique_commodities %}<option value="{{ commodity }}"></option>{% endfor %}
                </datalist>
              </div>
            </div>
          </form>
        </div>
      </section>
      <section class="col-md-9 dashboard__graph">
        <div id="network_graph" style="min-height: 500px;">
          <!-- Network Graph Will Be Loaded Here -->
        </div>
      </section>
    </div>
  </div>
{% endblock content %}

{% block javascript %}
  <script src="{% static 'django_energysystem_viewer/libs/htmx.min.js' %}"></script>
  <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
{% endblock javascript %}
